<div class="content-management-container">
  <!-- Header Section -->
  <div class="header">
    <div class="header-content">
      <div class="logo-section">
        <img src="assets/images/bcflats.png" alt="BC Flats Logo" class="header-logo">
      </div>
      <div class="title-section">
        <h1>Content Management Dashboard</h1>
        <p>Manage your website content, images, and text from one central location</p>
      </div>
      <div class="header-actions">
        <button type="button" 
                (click)="createBackup()" 
                class="backup-btn"
                title="Backup current content">
          <i class="fa fa-save"></i> Backup Content
        </button>
        <button type="button" 
                (click)="restoreFromBackup()" 
                class="restore-btn"
                [disabled]="!hasBackup"
                title="Restore from backup">
          <i class="fa fa-undo"></i> Restore Backup
        </button>
        <button type="button" 
                (click)="restoreToOriginal()" 
                class="restore-original-btn"
                title="Restore to original content">
          <i class="fa fa-refresh"></i> Reset to Original
        </button>
        <button type="button" 
                (click)="resetToOriginalHomepage()" 
                class="reset-homepage-btn"
                [disabled]="uploading"
                title="Reset to original homepage content">
          <i class="fa fa-home"></i> Reset Homepage
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-spinner" *ngIf="loading">
    <div class="spinner"></div>
    <p>Loading your content...</p>
  </div>

  <!-- Main Content -->
  <div class="content-sections" *ngIf="!loading">
    
    <!-- Quick Actions Bar -->
    <div class="quick-actions-bar">
      <div class="quick-actions-content">
        <div class="quick-actions-info">
          <i class="fa fa-lightbulb"></i>
          <span>Quick Actions: Use these tools to manage your content efficiently</span>
        </div>
        <div class="quick-actions-buttons">
          <button type="button" 
                  (click)="refreshContent()" 
                  class="quick-btn refresh-btn"
                  title="Refresh content">
            <i class="fa fa-refresh"></i> Refresh
          </button>
          <button type="button" 
                  (click)="exportContent()" 
                  class="quick-btn export-btn"
                  title="Export content data">
            <i class="fa fa-download"></i> Export
          </button>
        </div>
    </div>

    <!-- Logo Management Section -->
    <div class="section-card logo-section-card">
      <div class="section-header">
        <div class="section-icon">
          <i class="fa fa-image"></i>
        </div>
        <div class="section-title">
          <h2>Website Logo</h2>
          <p>Update your main website logo that appears in the header</p>
        <div class="section-location">
          <i class="fa fa-map-marker-alt"></i>
            <span>Appears in: Website header (top of every page)</span>
          </div>
        </div>
      </div>
      
      <div class="logo-content">
        <!-- Current Logo Display -->
        <div class="current-logo-display" *ngIf="getCurrentLogo()">
          <h3>Current Logo</h3>
          <div class="logo-preview-container">
        <img [src]="getCurrentLogo()" alt="Current Logo" class="logo-preview">
            <div class="logo-info">
              <span class="logo-status active">Active</span>
              <span class="logo-size">Displayed on all pages</span>
            </div>
          </div>
      </div>

        <!-- Logo Upload -->
        <div class="logo-upload-container">
          <h3>Update Logo</h3>
          <div class="upload-instructions">
            <i class="fa fa-info-circle"></i>
            <span>Recommended: PNG or JPG format, max 2MB, transparent background preferred</span>
          </div>
          
          <div class="file-upload-area">
            <div class="file-input-wrapper">
              <input type="file" 
                     id="logo-upload" 
                 (change)="onFileSelected($event, 'logo')" 
                 accept="image/*" 
                 class="file-input">
              <label for="logo-upload" class="file-input-label">
                <i class="fa fa-cloud-upload"></i>
                <span>Choose Logo File</span>
              </label>
            </div>
            
            <div class="file-selected-info" *ngIf="selectedLogo">
              <div class="file-details">
                <i class="fa fa-file-image-o"></i>
                <div class="file-info-text">
                  <span class="file-name">{{ selectedLogo.name }}</span>
                  <span class="file-size">{{ getFileSize(selectedLogo) }}</span>
                </div>
              </div>
              <button type="button" 
                      (click)="clearLogoSelection()" 
                      class="clear-selection-btn"
                      title="Clear selected file">
                <i class="fa fa-times"></i>
              </button>
          </div>
        </div>
        
          <div class="upload-actions">
        <button type="button" 
                (click)="uploadLogo()" 
                [disabled]="!selectedLogo || uploading" 
                    class="primary-btn upload-btn">
              <i class="fa fa-upload"></i>
              <span *ngIf="!uploading">Upload New Logo</span>
          <span *ngIf="uploading">Uploading...</span>
        </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Header Management Section -->
    <div class="section-card header-section-card">
      <div class="section-header">
        <div class="section-icon">
          <i class="fa fa-header"></i>
        </div>
        <div class="section-title">
          <h2>Header Management</h2>
          <p>Edit the website header title, navigation, and styling</p>
          <div class="section-location">
            <i class="fa fa-map-marker-alt"></i>
            <span>Appears in: Website header (top of every page)</span>
          </div>
        </div>
      </div>
      
      <div class="header-content">
        <!-- Company Name -->
        <div class="header-field-group">
          <h3>Company Information</h3>
          <div class="form-group">
            <label for="company-name">Company Name:</label>
            <input 
              type="text" 
              id="company-name"
              [(ngModel)]="headerContent.companyName" 
              placeholder="Enter company name"
              class="form-control">
            <small class="form-help">This will appear in the header and footer throughout the website</small>
          </div>
          <div class="form-group">
            <label for="logo-text">Logo Text (shown beside logo):</label>
            <input 
              type="text" 
              id="logo-text"
              [(ngModel)]="headerContent.logoText" 
              placeholder="Enter text to display beside logo"
              class="form-control">
            <small class="form-help">Shown next to the logo in the header. Leave blank to use Company Name.</small>
          </div>
        </div>

        <!-- Header Title -->
        <div class="header-field-group">
          <h3>Header Title</h3>
          <div class="form-group">
            <label for="header-title">Main Header Title:</label>
            <input 
              type="text" 
              id="header-title"
              [(ngModel)]="headerContent.title" 
              placeholder="Enter header title"
              class="form-control">
            <small class="form-help">This is the main title that appears in the header</small>
          </div>
        </div>

        <!-- Navigation Items -->
        <div class="header-field-group">
          <h3>Navigation Menu</h3>
          <div class="navigation-items">
            <div *ngFor="let navItem of headerContent.navigation; let i = index" class="navigation-item">
              <div class="nav-item-content">
                <div class="form-group">
                  <label>Menu Label:</label>
                  <input 
                    type="text" 
                    [(ngModel)]="navItem.label" 
                    placeholder="Menu item label"
                    class="form-control">
                </div>
                <div class="form-group">
                  <label>Link URL:</label>
                  <input 
                    type="text" 
                    [(ngModel)]="navItem.href" 
                    placeholder="Link URL (e.g., #home, /about)"
                    class="form-control">
                </div>
                <div class="form-group">
                  <label class="checkbox-label">
                    <input 
                      type="checkbox" 
                      [(ngModel)]="navItem.isExternal">
                    External Link
                  </label>
                </div>
                <button 
                  type="button" 
                  class="btn btn-danger btn-sm" 
                  (click)="removeNavigationItem(i)"
                  title="Remove this navigation item">
                  <i class="fa fa-trash"></i>
                </button>
              </div>
            </div>
          </div>
          <button 
            type="button" 
            class="btn btn-secondary" 
            (click)="addNavigationItem()">
            <i class="fa fa-plus"></i> Add Navigation Item
          </button>
        </div>

        <!-- Call-to-Action Button -->
        <div class="header-field-group">
          <h3>Call-to-Action Button</h3>
          <div class="cta-settings">
            <div class="form-group">
              <label>Button Text:</label>
              <input 
                type="text" 
                [(ngModel)]="headerContent.ctaButton.text" 
                placeholder="Button text (e.g., Book Now)"
                class="form-control">
            </div>
            <div class="form-group">
              <label>Button Link:</label>
              <input 
                type="text" 
                [(ngModel)]="headerContent.ctaButton.href" 
                placeholder="Button link (e.g., /reserve)"
                class="form-control">
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="headerContent.ctaButton.isExternal">
                External Link
              </label>
            </div>
          </div>
        </div>

        <!-- Login Button -->
        <div class="header-field-group">
          <h3>Login Button</h3>
          <div class="login-settings">
            <div class="form-group">
              <label>Button Text:</label>
              <input 
                type="text" 
                [(ngModel)]="headerContent.loginButton.text" 
                placeholder="Button text (e.g., Login)"
                class="form-control">
            </div>
            <div class="form-group">
              <label>Button Link:</label>
              <input 
                type="text" 
                [(ngModel)]="headerContent.loginButton.href" 
                placeholder="Button link (e.g., /login)"
                class="form-control">
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="headerContent.loginButton.isExternal">
                External Link
              </label>
            </div>
          </div>
        </div>

        <!-- Header Styling -->
        <div class="header-field-group">
          <h3>Header Styling</h3>
          <div class="styling-settings">
            <div class="form-group">
              <label>Background Color:</label>
              <input 
                type="color" 
                [(ngModel)]="headerContent.styles.backgroundColor" 
                class="color-input">
            </div>
            <div class="form-group">
              <label>Text Color:</label>
              <input 
                type="color" 
                [(ngModel)]="headerContent.styles.textColor" 
                class="color-input">
            </div>
            <div class="form-group">
              <label>Accent Color:</label>
              <input 
                type="color" 
                [(ngModel)]="headerContent.styles.accentColor" 
                class="color-input">
            </div>
            <div class="form-group">
              <label>Font Family:</label>
              <select [(ngModel)]="headerContent.styles.fontFamily" class="form-control">
                <option value="Montserrat, sans-serif">Montserrat</option>
                <option value="Arial, sans-serif">Arial</option>
                <option value="Helvetica, sans-serif">Helvetica</option>
                <option value="Georgia, serif">Georgia</option>
                <option value="Times New Roman, serif">Times New Roman</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Save Button -->
        <div class="header-actions">
          <button 
            type="button" 
            (click)="saveHeaderContent()" 
            [disabled]="savingHeader" 
            class="primary-btn save-header-btn">
            <i class="fa fa-save"></i>
            <span *ngIf="!savingHeader">Save Header Changes</span>
            <span *ngIf="savingHeader">Saving...</span>
          </button>
          <button 
            type="button" 
            (click)="resetHeaderContent()" 
            class="btn btn-secondary">
            <i class="fa fa-undo"></i> Reset to Default
          </button>
        </div>
      </div>
    </div>

    <!-- Footer Management Section -->
    <div class="section-card footer-section-card">
      <div class="section-header">
        <div class="section-icon">
          <i class="fa fa-copyright"></i>
        </div>
        <div class="section-title">
          <h2>Footer Management</h2>
          <p>Edit the website footer content, company information, and copyright</p>
          <div class="section-location">
            <i class="fa fa-map-marker-alt"></i>
            <span>Appears in: Website footer (bottom of every page)</span>
          </div>
        </div>
      </div>
      
      <div class="footer-content">
        <!-- Company Information -->
        <div class="footer-field-group">
          <h3>Company Information</h3>
          <div class="form-group">
            <label for="company-name">Company Name:</label>
            <input 
              type="text" 
              id="company-name"
              [(ngModel)]="footerContent.companyName" 
              placeholder="Enter company name"
              class="form-control">
            <small class="form-help">This will appear in the header and footer</small>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="footer-field-group">
          <h3>Contact Information</h3>
          <div class="contact-settings">
            <div class="form-group">
              <label>Phone Number 1:</label>
              <input 
                type="tel" 
                [(ngModel)]="footerContent.phone1" 
                placeholder="Enter primary phone number"
                class="form-control">
            </div>
            <div class="form-group">
              <label>Phone Number 2:</label>
              <input 
                type="tel" 
                [(ngModel)]="footerContent.phone2" 
                placeholder="Enter secondary phone number"
                class="form-control">
            </div>
            <div class="form-group">
              <label>Email Address:</label>
              <input 
                type="email" 
                [(ngModel)]="footerContent.email" 
                placeholder="Enter email address"
                class="form-control">
            </div>
            <div class="form-group">
              <label>Address:</label>
              <input 
                type="text" 
                [(ngModel)]="footerContent.address" 
                placeholder="Enter company address"
                class="form-control">
            </div>
          </div>
        </div>

        <!-- Social Media Links -->
        <div class="footer-field-group">
          <h3>Social Media Links</h3>
          <div class="social-settings">
            <div class="form-group">
              <label>Facebook URL:</label>
              <input 
                type="url" 
                [(ngModel)]="footerContent.social.facebook" 
                placeholder="https://facebook.com/yourpage"
                class="form-control">
            </div>
            <div class="form-group">
              <label>Twitter URL:</label>
              <input 
                type="url" 
                [(ngModel)]="footerContent.social.twitter" 
                placeholder="https://twitter.com/yourpage"
                class="form-control">
            </div>
            <div class="form-group">
              <label>Instagram URL:</label>
              <input 
                type="url" 
                [(ngModel)]="footerContent.social.instagram" 
                placeholder="https://instagram.com/yourpage"
                class="form-control">
            </div>
            <div class="form-group">
              <label>LinkedIn URL:</label>
              <input 
                type="url" 
                [(ngModel)]="footerContent.social.linkedin" 
                placeholder="https://linkedin.com/company/yourpage"
                class="form-control">
            </div>
          </div>
        </div>

        <!-- Copyright Settings -->
        <div class="footer-field-group">
          <h3>Copyright Settings</h3>
          <div class="copyright-settings">
            <div class="form-group">
              <label>Copyright Text:</label>
              <input 
                type="text" 
                [(ngModel)]="footerContent.copyrightText" 
                placeholder="Enter copyright text"
                class="form-control">
              <small class="form-help">Leave empty to use default format: "© [Year]-[Next Year] [Company Name]. All rights reserved."</small>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [(ngModel)]="footerContent.showDynamicYear">
                Use dynamic year (automatically updates)
              </label>
            </div>
            <div class="form-group">
              <label>Set Year / Range (disables dynamic year)</label>
              <div class="inline-inputs">
                <input type="number" class="form-control" [(ngModel)]="footerStartYear" min="1900" placeholder="Start year">
                <span>—</span>
                <input type="number" class="form-control" [(ngModel)]="footerEndYear" min="1900" placeholder="End year (optional)">
                <button type="button" class="btn btn-secondary" (click)="updateFooterYearRange(footerStartYear, footerEndYear)">Apply</button>
                <button type="button" class="btn btn-primary" (click)="saveFooterYearRange(footerStartYear, footerEndYear)" [disabled]="savingFooter">Save Year</button>
              </div>
              <small class="form-help">Leave End year empty to set a single year.</small>
            </div>
          </div>
        </div>

        <!-- Footer Styling -->
        <div class="footer-field-group">
          <h3>Footer Styling</h3>
          <div class="styling-settings">
            <div class="form-group">
              <label>Background Color:</label>
              <input 
                type="color" 
                [(ngModel)]="footerContent.styles.backgroundColor" 
                class="color-input">
            </div>
            <div class="form-group">
              <label>Text Color:</label>
              <input 
                type="color" 
                [(ngModel)]="footerContent.styles.textColor" 
                class="color-input">
            </div>
            <div class="form-group">
              <label>Link Color:</label>
              <input 
                type="color" 
                [(ngModel)]="footerContent.styles.linkColor" 
                class="color-input">
            </div>
            <div class="form-group">
              <label>Copyright Background Color:</label>
              <input 
                type="color" 
                [(ngModel)]="footerContent.styles.copyrightBackgroundColor" 
                class="color-input">
            </div>
          </div>
        </div>

        <!-- Save Button -->
        <div class="footer-actions">
          <button 
            type="button" 
            (click)="saveFooterContent()" 
            [disabled]="savingFooter" 
            class="primary-btn save-footer-btn">
            <i class="fa fa-save"></i>
            <span *ngIf="!savingFooter">Save Footer Changes</span>
            <span *ngIf="savingFooter">Saving...</span>
          </button>
          <button 
            type="button" 
            (click)="resetFooterContent()" 
            class="btn btn-secondary">
            <i class="fa fa-undo"></i> Reset to Default
          </button>
        </div>
      </div>
    </div>

    <!-- Home Management Section -->
    <div class="section-card home-section-card">
      <div class="section-header">
        <div class="section-icon">
          <i class="fa fa-home"></i>
        </div>
        <div class="section-title">
          <h2>Home Page Management</h2>
          <p>Edit the home page content, images, and sections directly</p>
          <div class="section-location">
            <i class="fa fa-map-marker-alt"></i>
            <span>Appears in: Home page (main landing page)</span>
          </div>
        </div>
      </div>
      
      <div class="home-content">
        <!-- Hero Section Management -->
        <div class="home-field-group">
          <h3>Hero Section</h3>
          <div class="hero-settings">
            <div class="form-group">
              <label>Hero Images (Gallery):</label>
              <div class="image-gallery-upload">
                <input 
                  type="file" 
                  id="hero-images" 
                  (change)="onHeroImagesSelected($event)" 
                  accept="image/*" 
                  multiple
                  class="file-input">
                <label for="hero-images" class="file-input-label">
                  <i class="fa fa-cloud-upload"></i>
                  <span>Upload Hero Images</span>
                </label>
              </div>
              <div class="current-hero-images" *ngIf="homeContent.heroImages.length > 0">
                <div *ngFor="let image of homeContent.heroImages; let i = index" class="hero-image-item">
                  <img [src]="image" alt="Hero image" class="hero-preview">
                  <button type="button" class="btn btn-danger btn-sm" (click)="removeHeroImage(i)">
                    <i class="fa fa-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- About Section Management -->
        <div class="home-field-group">
          <h3>About Section</h3>
          <div class="about-settings">
            <div class="about-item">
              <h4>Staff Section</h4>
              <div class="form-group">
                <label>Title:</label>
                <input 
                  type="text" 
                  [(ngModel)]="homeContent.aboutContent.staffTitle" 
                  placeholder="Enter staff title"
                  class="form-control">
              </div>
              <div class="form-group">
                <label>Description:</label>
                <textarea 
                  [(ngModel)]="homeContent.aboutContent.staffDescription" 
                  placeholder="Enter staff description"
                  class="form-control"
                  rows="3"></textarea>
              </div>
              <div class="form-group">
                <label>Image:</label>
                <input 
                  type="file" 
                  (change)="onAboutImageSelected($event, 'staff')" 
                  accept="image/*" 
                  class="file-input">
                <div class="current-image" *ngIf="homeContent.aboutImages['staff']">
                  <img [src]="homeContent.aboutImages['staff']" alt="Staff image" class="image-preview">
                </div>
              </div>
            </div>

            <div class="about-item">
              <h4>Foods Section</h4>
              <div class="form-group">
                <label>Title:</label>
                <input 
                  type="text" 
                  [(ngModel)]="homeContent.aboutContent.foodsTitle" 
                  placeholder="Enter foods title"
                  class="form-control">
              </div>
              <div class="form-group">
                <label>Description:</label>
                <textarea 
                  [(ngModel)]="homeContent.aboutContent.foodsDescription" 
                  placeholder="Enter foods description"
                  class="form-control"
                  rows="3"></textarea>
              </div>
              <div class="form-group">
                <label>Image:</label>
                <input 
                  type="file" 
                  (change)="onAboutImageSelected($event, 'foods')" 
                  accept="image/*" 
                  class="file-input">
                <div class="current-image" *ngIf="homeContent.aboutImages['foods']">
                  <img [src]="homeContent.aboutImages['foods']" alt="Foods image" class="image-preview">
                </div>
              </div>
            </div>

            <div class="about-item">
              <h4>Pool Section</h4>
              <div class="form-group">
                <label>Title:</label>
                <input 
                  type="text" 
                  [(ngModel)]="homeContent.aboutContent.poolTitle" 
                  placeholder="Enter pool title"
                  class="form-control">
              </div>
              <div class="form-group">
                <label>Description:</label>
                <textarea 
                  [(ngModel)]="homeContent.aboutContent.poolDescription" 
                  placeholder="Enter pool description"
                  class="form-control"
                  rows="3"></textarea>
              </div>
              <div class="form-group">
                <label>Image:</label>
                <input 
                  type="file" 
                  (change)="onAboutImageSelected($event, 'pool')" 
                  accept="image/*" 
                  class="file-input">
                <div class="current-image" *ngIf="homeContent.aboutImages['pool']">
                  <img [src]="homeContent.aboutImages['pool']" alt="Pool image" class="image-preview">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Save Button -->
        <div class="home-actions">
          <button 
            type="button" 
            (click)="saveHomeContent()" 
            [disabled]="savingHome" 
            class="primary-btn save-home-btn">
            <i class="fa fa-save"></i>
            <span *ngIf="!savingHome">Save Home Changes</span>
            <span *ngIf="savingHome">Saving...</span>
          </button>
          <button 
            type="button" 
            (click)="resetHomeContent()" 
            class="btn btn-secondary">
            <i class="fa fa-undo"></i> Reset to Default
          </button>
        </div>
      </div>
    </div>

    <!-- Content Sections -->
    <div class="section-card" *ngFor="let section of sections; trackBy: trackBySection">
      <div class="section-header">
        <div class="section-icon">
          <i [class]="getSectionIcon(section.id)"></i>
        </div>
        <div class="section-title">
        <h2>{{ section.name }}</h2>
        <p>{{ section.description }}</p>
        <div class="section-location">
          <i class="fa fa-map-marker-alt"></i>
            <span>Appears in: {{ getSectionLocation(section.id) }}</span>
          </div>
        </div>
        <div class="section-status">
          <span class="status-badge" [class]="getSectionStatusClass(section.id)">
            {{ getSectionStatus(section.id) }}
          </span>
        </div>
      </div>

      <!-- Section Content Tabs -->
      <div class="section-tabs">
        <div class="tab-buttons">
          <button type="button" 
                  class="tab-btn active" 
                  (click)="setActiveTab(section.id, 'text')"
                  [class.active]="getActiveTab(section.id) === 'text'">
            <i class="fa fa-font"></i> Text Content
          </button>
          <button type="button" 
                  class="tab-btn" 
                  (click)="setActiveTab(section.id, 'images')"
                  [class.active]="getActiveTab(section.id) === 'images'">
            <i class="fa fa-image"></i> Images
          </button>
          <button type="button" 
                  class="tab-btn" 
                  (click)="setActiveTab(section.id, 'gallery')"
                  [class.active]="getActiveTab(section.id) === 'gallery'"
                  *ngIf="section.id === 'hero' || section.id === 'rooms'">
            <i class="fa fa-th"></i> Gallery
          </button>
        </div>

        <!-- Text Content Tab -->
        <div class="tab-content" *ngIf="getActiveTab(section.id) === 'text'">
          <div class="current-vs-edit">
            <div class="current-block">
              <h4>Current Content</h4>
              <div class="content-grid">
                <div class="content-item" *ngFor="let item of getSectionContentOrSample(section.id)">
                  <img *ngIf="item.type === 'image' || item.type === 'logo'" [src]="item.optimizedUrl || item.value" class="content-image"/>
                  <div *ngIf="item.type === 'text'" class="text-preview">
                    <strong>{{ item.key }}</strong>
                    <div>{{ item.value }}</div>
                  </div>
                  <div class="meta">Key: {{ item.key }} | Type: {{ item.type }}</div>
                </div>
              </div>
            </div>
            
            </div>
          <div class="text-content-editor">
            <div class="editor-header">
              <h3>Edit Text Content</h3>
              <div class="editor-actions">
                <button type="button" 
                        (click)="resetSectionText(section.id)" 
                        class="secondary-btn reset-btn"
                        title="Reset to current values">
                  <i class="fa fa-undo"></i> Reset
                </button>
            <button type="button"
                        (click)="saveAllText(section.id)" 
                        class="primary-btn save-btn"
                    [disabled]="uploading"
                        title="Save all changes">
                  <i class="fa fa-save"></i> Save All
                </button>
              </div>
            </div>

            <div class="text-inputs-grid">
              <div class="text-input-group" *ngFor="let field of getTextFields(section.id)">
                <label [for]="'text-' + section.id + '-' + field.key">{{ field.label }}</label>
                <div class="input-wrapper">
                  <div class="current-value-pill" *ngIf="getCurrentContentWithFallback(section.id, field.key)">
                    <i class="fa fa-eye"></i>
                    <span><strong>Current:</strong> {{ getCurrentContentWithFallback(section.id, field.key) }}</span>
                  </div>
                  <input *ngIf="field.type === 'input'" 
                         type="text"
                         [id]="'text-' + section.id + '-' + field.key"
                         [(ngModel)]="textContent[section.id + '_' + field.key]"
                         [placeholder]="field.placeholder"
                         class="text-input">
                  <textarea *ngIf="field.type === 'textarea'" 
                           [id]="'text-' + section.id + '-' + field.key"
                           [(ngModel)]="textContent[section.id + '_' + field.key]"
                           [placeholder]="field.placeholder"
                           rows="3"
                           class="text-textarea"></textarea>
                  
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

        <!-- Images Tab -->
        <div class="tab-content" *ngIf="getActiveTab(section.id) === 'images'">
          <div class="hint">Select a file to replace an existing image or click Upload Image to add one. Keys are shown on each tile.</div>
          <div class="images-manager">
            <div class="images-header" (dragover)="onDragOver($event)" (drop)="onDropFile($event, 'image')">
              <h3>Manage Images</h3>
              <div class="images-actions">
                <button type="button" 
                        (click)="uploadSectionImage(section.id)" 
                        class="primary-btn upload-btn"
                        [disabled]="!selectedFile || uploading">
                  <i class="fa fa-upload"></i> Upload Image
                </button>
              </div>
            </div>

            <!-- Current Images -->
            <div class="current-images" *ngIf="hasImageContent(section.id)">
              <h4>Current Images</h4>
              <div class="images-grid">
                <div class="image-item" *ngFor="let item of getImageContent(section.id)">
                  <div class="image-preview">
            <img [src]="item.optimizedUrl || item.value" 
                 [alt]="item.altText || item.key"
                         class="content-image">
                    <div class="image-overlay">
                      <button type="button" 
                              (click)="replaceImage(section.id, item.key)"
                              class="delete-image-btn"
                              title="Replace with selected file" [disabled]="!selectedFile || uploading">
                        <i class="fa fa-refresh"></i>
                      </button>
                      <button type="button" 
                              (click)="deleteContent(item.id!)" 
                              class="delete-image-btn"
                              title="Delete image">
                        <i class="fa fa-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div class="image-details">
                    <span class="image-key">{{ formatImageKey(item.key) }}</span>
              <span class="image-alt" *ngIf="item.altText">{{ item.altText }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Image Upload -->
            <div class="image-upload-area" (dragover)="onDragOver($event)" (drop)="onDropFile($event, 'image')">
              <h4>Upload New Image</h4>
              <div class="upload-instructions">
                <i class="fa fa-info-circle"></i>
                <span>Select an image file to upload for this section</span>
              </div>
              
              <div class="file-upload-controls">
                <div class="file-input-wrapper">
            <input type="file" 
                   [id]="'image-upload-' + section.id"
                   (change)="onFileSelected($event, 'image')" 
                   accept="image/*" 
                   class="file-input">
                  <label [for]="'image-upload-' + section.id" class="file-input-label">
                    <i class="fa fa-cloud-upload"></i>
                    <span>Choose Image</span>
                  </label>
                </div>
                
                <div class="file-selected-info" *ngIf="selectedFile">
                  <div class="file-details">
                    <i class="fa fa-file-image-o"></i>
                    <div class="file-info-text">
                      <span class="file-name">{{ selectedFile.name }}</span>
                      <span class="file-size">{{ getFileSize(selectedFile) }}</span>
            </div>
          </div>
                  <img *ngIf="selectedPreviewUrl" [src]="selectedPreviewUrl" class="preview-thumb" alt="Preview"/>
            <button type="button" 
                          (click)="clearFileSelection()" 
                          class="clear-selection-btn"
                          title="Clear selected file">
                    <i class="fa fa-times"></i>
            </button>
        </div>
      </div>

              <div class="upload-form" *ngIf="selectedFile">
                <div class="form-group">
                  <label for="alt-text">Alt Text (Optional)</label>
                  <input type="text" 
                         id="alt-text"
                         [(ngModel)]="altText" 
                         placeholder="Describe the image for accessibility" 
                         class="alt-text-input">
            </div>
          </div>
        </div>
      </div>

          <!-- Hero specific trio editor with fixed keys -->
          <div *ngIf="section.id === 'hero'" class="hero-trio-editor">
            <h4>Hero Slides (Fixed Keys)</h4>
            <div class="images-grid">
              <div class="image-item" *ngFor="let idx of [1,2,3]">
                <div class="image-preview">
                  <img [src]="getCurrentContent('hero', 'hero-image-' + idx, 'image') || 'assets/images/placeholder.jpg'" class="content-image"/>
                  <div class="image-overlay">
                    <button type="button" 
                            (click)="replaceImage('hero', 'hero-image-' + idx)"
                            class="delete-image-btn"
                            [disabled]="!selectedFile || uploading"
                            title="Replace hero-image-{{idx}} with selected file">
                      <i class="fa fa-refresh"></i>
                    </button>
                  </div>
                </div>
                <div class="image-details">
                  <span class="image-key">hero-image-{{idx}}</span>
                  <div class="file-upload-controls small">
                    <div class="file-input-wrapper">
                      <input type="file" (change)="onFileSelected($event, 'image')" accept="image/*" class="file-input">
                      <label class="file-input-label"><i class="fa fa-cloud-upload"></i><span>Choose Image</span></label>
              </div>
            </div>
                </div>
            </div>
          </div>
        </div>
      </div>

        <!-- Gallery Tab -->
        <div class="tab-content" *ngIf="getActiveTab(section.id) === 'gallery' && (section.id === 'hero' || section.id === 'rooms')">
          <div class="gallery-manager">
            <div class="gallery-header">
              <h3>Gallery Management</h3>
              <div class="gallery-actions">
                <button type="button" 
                        (click)="uploadGalleryImages(section.id)" 
                        class="primary-btn upload-btn"
                        [disabled]="selectedGalleryFiles.length === 0 || uploading">
                  <i class="fa fa-upload"></i> Upload Images
                </button>
        </div>
      </div>

            <!-- Gallery Upload -->
            <div class="gallery-upload-area">
              <h4>Upload Multiple Images</h4>
              <div class="upload-instructions">
                <i class="fa fa-info-circle"></i>
                <span>Select multiple images to create a gallery for this section</span>
              </div>
              
              <div class="file-upload-controls">
                <div class="file-input-wrapper">
            <input type="file" 
                   [id]="'gallery-upload-' + section.id"
                   (change)="onFileSelected($event, 'gallery')" 
                   accept="image/*" 
                   multiple 
                   class="file-input">
                  <label [for]="'gallery-upload-' + section.id" class="file-input-label">
                    <i class="fa fa-cloud-upload"></i>
                    <span>Choose Multiple Images</span>
                  </label>
          </div>
          
                <div class="files-selected-info" *ngIf="selectedGalleryFiles.length > 0">
                  <div class="files-summary">
                    <i class="fa fa-images"></i>
                    <span>{{ selectedGalleryFiles.length }} image(s) selected</span>
                  </div>
          <button type="button" 
                          (click)="clearGallerySelection()" 
                          class="clear-selection-btn"
                          title="Clear selected files">
                    <i class="fa fa-times"></i>
          </button>
                </div>
              </div>
            </div>

            <!-- Current Gallery -->
            <div class="current-gallery" *ngIf="hasGalleryContent(section.id)">
              <h4>Current Gallery</h4>
              <div class="gallery-grid">
                <div class="gallery-item" *ngFor="let item of getGalleryContent(section.id)">
                  <div class="gallery-preview">
                    <img [src]="item.optimizedUrl || item.value" 
                         [alt]="item.altText || item.key"
                         class="gallery-image">
                    <div class="gallery-overlay">
                      <button type="button" 
                              (click)="deleteContent(item.id!)" 
                              class="delete-gallery-btn"
                              title="Delete image">
                        <i class="fa fa-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div class="gallery-details">
                    <span class="gallery-order">#{{ item.order || 1 }}</span>
                    <span class="gallery-alt" *ngIf="item.altText">{{ item.altText }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Service Icons Section -->
    <div class="section-card service-icons-section-card">
      <div class="section-header">
        <div class="section-icon">
          <i class="fa fa-icons"></i>
        </div>
        <div class="section-title">
          <h2>Service Icons</h2>
          <p>Manage the service icons displayed in the services section</p>
          <div class="section-location">
            <i class="fa fa-map-marker-alt"></i>
            <span>Appears in: Services section (home page)</span>
          </div>
        </div>
      </div>
      
      <div class="service-icons-content">
        <div class="icons-grid">
          <div class="icon-item" *ngFor="let icon of serviceIcons; let i = index">
            <div class="icon-preview">
              <img [src]="icon.currentUrl" [alt]="icon.name" class="icon-image">
              <div class="icon-overlay">
                <button type="button" 
                        (click)="replaceServiceIcon(i)" 
                        class="btn btn-primary btn-sm"
                        [disabled]="!selectedFile || uploading">
                  <i class="fa fa-upload"></i> Replace
                </button>
              </div>
            </div>
            <div class="icon-details">
              <h4>{{ icon.name }}</h4>
              <p>{{ icon.description }}</p>
              <div class="file-upload-controls">
                <input type="file" 
                       (change)="onServiceIconFileSelected($event, i)" 
                       accept="image/*" 
                       class="file-input">
                <label class="file-input-label">
                  <i class="fa fa-cloud-upload"></i>
                  <span>Choose Icon</span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Room Images Section -->
    <div class="section-card room-images-section-card">
      <div class="section-header">
        <div class="section-icon">
          <i class="fa fa-bed"></i>
        </div>
        <div class="section-title">
          <h2>Room Images</h2>
          <p>Manage the room images and seasonal images displayed in the rooms section</p>
          <div class="section-location">
            <i class="fa fa-map-marker-alt"></i>
            <span>Appears in: Rooms section (home page)</span>
          </div>
        </div>
      </div>
      
      <div class="room-images-content">
        <div class="rooms-grid">
          <div class="room-category" *ngFor="let room of roomImages; let i = index">
            <h3>{{ room.name }}</h3>
            <div class="room-images-grid">
              <!-- Main Room Image -->
              <div class="room-image-item main-image">
                <div class="image-preview">
                  <img [src]="room.mainImage" [alt]="room.name + ' main image'" class="room-image">
                  <div class="image-overlay">
                    <button type="button" 
                            (click)="replaceRoomImage(i, 'main')" 
                            class="btn btn-primary btn-sm"
                            [disabled]="!selectedFile || uploading">
                      <i class="fa fa-upload"></i> Replace
                    </button>
                  </div>
                </div>
                <div class="image-details">
                  <h4>Main Image</h4>
                  <div class="file-upload-controls">
                    <input type="file" 
                           (change)="onRoomImageFileSelected($event, i, 'main')" 
                           accept="image/*" 
                           class="file-input">
                    <label class="file-input-label">
                      <i class="fa fa-cloud-upload"></i>
                      <span>Choose Main Image</span>
                    </label>
                  </div>
                </div>
              </div>
              
              <!-- Seasonal Images -->
              <div class="room-image-item seasonal-image" *ngFor="let seasonalImg of room.seasonalImages; let j = index">
                <div class="image-preview">
                  <img [src]="seasonalImg" [alt]="room.name + ' seasonal image ' + (j + 1)" class="room-image">
                  <div class="image-overlay">
                    <button type="button" 
                            (click)="replaceRoomImage(i, 'seasonal', j)" 
                            class="btn btn-primary btn-sm"
                            [disabled]="!selectedFile || uploading">
                      <i class="fa fa-upload"></i> Replace
                    </button>
                  </div>
                </div>
                <div class="image-details">
                  <h4>Seasonal Image {{ j + 1 }}</h4>
                  <div class="file-upload-controls">
                    <input type="file" 
                           (change)="onRoomImageFileSelected($event, i, 'seasonal', j)" 
                           accept="image/*" 
                           class="file-input">
                    <label class="file-input-label">
                      <i class="fa fa-cloud-upload"></i>
                      <span>Choose Image</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Homepage Preview Section -->
    <div class="section-card homepage-preview-section-card">
      <div class="section-header">
        <div class="section-icon">
          <i class="fa fa-eye"></i>
        </div>
        <div class="section-title">
          <h2>Homepage Preview</h2>
          <p>Preview how your homepage will look with current content</p>
          <div class="section-location">
            <i class="fa fa-map-marker-alt"></i>
            <span>Live preview of homepage content</span>
          </div>
        </div>
      </div>
      
      <div class="homepage-preview-content">
        <!-- Header Preview -->
        <div class="preview-section">
          <h3>Header Preview</h3>
          <div class="header-preview" [style]="getHeaderStyles()">
            <div class="header-bar">
              <a href="#home" class="logo">
                <img [src]="getCurrentLogo()" alt="BC Flats Logo" class="w-16 h-16">
                <span class="logo-text">{{ headerContent.companyName }}</span>
              </a>
              <nav>
                <a *ngFor="let item of headerContent.navigation; trackBy: trackByIndex"
                   [href]="item.href" class="nav-link">
                  {{ item.label }}
                </a>
                <a [href]="headerContent.ctaButton.href" class="btn book-now-btn">
                  {{ headerContent.ctaButton.text }}
                </a>
              </nav>
              <a [href]="headerContent.loginButton.href" class="btn login-btn">
                {{ headerContent.loginButton.text }}
              </a>
            </div>
          </div>
        </div>

        <!-- Hero Images Preview -->
        <div class="preview-section">
          <h3>Hero Images Preview</h3>
          <div class="hero-preview">
            <div class="hero-slider">
              <div class="hero-slide" *ngFor="let image of homeContent.heroImages; let i = index">
                <img [src]="image" [alt]="'Hero image ' + (i + 1)" class="hero-image">
                <div class="hero-content">
                  <h3>{{ getHeroTitle(i) }}</h3>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- About Section Preview -->
        <div class="preview-section">
          <h3>About Section Preview</h3>
          <div class="about-preview">
            <div class="about-item" *ngFor="let item of getAboutItems()">
              <div class="about-image">
                <img [src]="item.image" [alt]="item.title">
              </div>
              <div class="about-content">
                <h3>{{ item.title }}</h3>
                <p>{{ item.description }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Services Preview -->
        <div class="preview-section">
          <h3>Services Preview</h3>
          <div class="services-preview">
            <div class="service-item" *ngFor="let icon of serviceIcons; let i = index">
              <img [src]="icon.currentUrl" [alt]="icon.name" class="service-icon">
              <h3>{{ getServiceTitle(i) }}</h3>
              <p>{{ getServiceDescription(i) }}</p>
            </div>
          </div>
        </div>

        <!-- Room Images Preview -->
        <div class="preview-section">
          <h3>Room Images Preview</h3>
          <div class="rooms-preview">
            <div class="room-preview" *ngFor="let room of roomImages">
              <h4>{{ room.name }}</h4>
              <div class="room-images">
                <img [src]="room.mainImage" [alt]="room.name + ' main'" class="main-room-image">
                <div class="seasonal-images">
                  <img *ngFor="let img of room.seasonalImages; let j = index" 
                       [src]="img" [alt]="room.name + ' seasonal ' + (j + 1)" 
                       class="seasonal-image">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer Preview -->
        <div class="preview-section">
          <h3>Footer Preview</h3>
          <div class="footer-preview" [style]="getFooterStyles()">
            <div class="footer-contacts">
              <a [href]="'tel:' + footerContent.phone1"><i class="fas fa-phone"></i> {{ footerContent.phone1 }}</a>
              <a [href]="'tel:' + footerContent.phone2"><i class="fas fa-phone"></i> {{ footerContent.phone2 }}</a>
              <a [href]="'mailto:' + footerContent.email"><i class="fas fa-envelope"></i> {{ footerContent.email }}</a>
              <a href="#"><i class="fas fa-map-marker-alt"></i> {{ footerContent.address }}</a>
            </div>
            <div class="footer-socials">
              <a [href]="footerContent.social.facebook" target="_blank"><i class="fab fa-facebook-f"></i> Facebook</a>
              <a [href]="footerContent.social.twitter" target="_blank"><i class="fab fa-twitter"></i> Twitter</a>
              <a [href]="footerContent.social.instagram" target="_blank"><i class="fab fa-instagram"></i> Instagram</a>
              <a [href]="footerContent.social.linkedin" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a>
            </div>
            <div class="footer-bottom">
              <p>&copy; {{ getCopyrightText() }} Hotel Management System | Version 1.0.0</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Help Section -->
    <div class="help-section">
      <div class="help-content">
        <div class="help-icon">
          <i class="fa fa-question-circle"></i>
        </div>
        <div class="help-text">
          <h3>Need Help?</h3>
          <p>Here are some tips to help you manage your content effectively:</p>
          <ul class="help-tips">
            <li><strong>Text Content:</strong> Update titles, descriptions, and other text elements</li>
            <li><strong>Images:</strong> Upload new images to replace existing ones</li>
            <li><strong>Gallery:</strong> Manage multiple images for hero and rooms sections</li>
            <li><strong>Service Icons:</strong> Update the icons used in the services section</li>
            <li><strong>Room Images:</strong> Manage main and seasonal images for each room type</li>
            <li><strong>Logo:</strong> Update your website logo from the top section</li>
            <li><strong>Reset:</strong> Use the reset button to restore original content</li>
            <li><strong>Preview:</strong> Check the homepage preview to see how changes will look</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
