<!-- Loading Spinner Overlay -->
<app-loading-spinner 
  *ngIf="isLoading" 
  [overlay]="true" 
  message="Loading Dashboard..." 
  [size]="'large'">
</app-loading-spinner>

<!-- Content will show after loading -->
<div *ngIf="!isLoading" class="dashboard-container">
  <!-- Dashboard Header -->
  <div class="dashboard-title">
    <h1>
      <i class="fa fa-chart-bar"></i>
      <span>Basic Information</span>
    </h1>
    <p>Real-time Tracking and Insights Overview</p>
  </div>

  <!-- Analytics Cards -->
  <div class="analytics-grid">
    <div class="analytics-card blue">
      <div class="icon-wrapper blue">
        <i class="fa fa-bed"></i>
      </div>
      <div class="analytics-content">
        <p class="label">Total Rooms</p>
        <p class="value">{{ allCount }}</p>
      </div>
    </div>

    <div class="analytics-card green">
      <div class="icon-wrapper green">
        <i class="fa fa-circle-check"></i>
      </div>
      <div class="analytics-content">
        <p class="label">
          Available
          <button class="dropdown-btn" (click)="toggleDropdown('available')" aria-label="Show breakdown">▼</button>
        </p>
        <p class="value">{{ availableRooms }}</p>
        <div class="dropdown">
          <ul *ngIf="dropdownOpen.available">
            <li *ngFor="let item of availableBreakdown">
              {{ item.name }}: {{ item.count }}
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="analytics-card yellow">
      <div class="icon-wrapper yellow">
        <i class="fa fa-calendar-check"></i>
      </div>
      <div class="analytics-content">
        <p class="label">
          Reserved
          <button class="dropdown-btn" (click)="toggleDropdown('reserved')" aria-label="Show breakdown">▼</button>
        </p>
        <p class="value">{{ reservedRooms }}</p>
        <div class="dropdown">
          <ul *ngIf="dropdownOpen.reserved">
            <li *ngFor="let item of reservedBreakdown">
              {{ item.name }}: {{ item.count }}
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="analytics-card red">
      <div class="icon-wrapper red">
        <i class="fa fa-door-closed"></i>
      </div>
      <div class="analytics-content">
        <p class="label">
          Occupied
          <button class="dropdown-btn" (click)="toggleDropdown('occupied')" aria-label="Show breakdown">▼</button>
        </p>
        <p class="value">{{ occupiedRooms }}</p>
        <div class="dropdown">
          <ul *ngIf="dropdownOpen.occupied">
            <li *ngFor="let item of occupiedBreakdown">
              {{ item.name }}: {{ item.count }}
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="analytics-card gray">
      <div class="icon-wrapper gray">
        <i class="fa fa-question-circle"></i>
      </div>
      <div class="analytics-content">
        <p class="label">
          Other
          <button class="dropdown-btn" (click)="toggleDropdown('other')" aria-label="Show breakdown">▼</button>
        </p>
        <p class="value">{{ otherRooms }}</p>
        <div class="dropdown">
          <ul *ngIf="dropdownOpen.other">
            <li *ngFor="let item of otherBreakdown">
              {{ item.name }}: {{ item.count }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Additional Metrics Cards -->
  <div class="metrics-grid">
    <div class="metrics-card">
      <div class="metrics-content">
        <p class="label">Total Revenue</p>
        <p class="value">₱{{ totalRevenue | number:'1.0-0' }}</p>
      </div>
      <div class="icon-wrapper green">
        <i class="fa fa-dollar-sign"></i>
      </div>
    </div>

    <div class="metrics-card">
      <div class="metrics-content">
        <p class="label">Occupancy Rate</p>
        <p class="value">{{ occupancyRate }}%</p>
      </div>
      <div class="icon-wrapper blue">
        <i class="fa fa-percentage"></i>
      </div>
    </div>

    <div class="metrics-card">
      <div class="metrics-content">
        <p class="label">Average Stay</p>
        <p class="value">{{ averageStay }} days</p>
      </div>
      <div class="icon-wrapper purple">
        <i class="fa fa-clock"></i>
      </div>
    </div>
  </div>

  <div class="dashboard-basic-info">
    <app-dashboardchartview></app-dashboardchartview>
  </div>
</div>
