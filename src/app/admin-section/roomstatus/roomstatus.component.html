<div *ngIf="loading">Loading rooms...</div>
<div class="topbar">
  <h2>Room Status</h2>
  <p>View and manage the status of all rooms. You can edit individual room statuses or reset all rooms to "Vacant and Ready".</p>
</div>

<div class="actions-bar" style="margin-bottom: 1rem;">
  <button class="reset-btn" (click)="resetAllRooms()" [disabled]="loading">
    Reset All to Vacant and Ready
  </button>
</div>
<div *ngIf="error" class="error">{{ error }}</div>

<table>
  <thead>
    <tr>
      <th>Room Number</th>
      <th>Type</th>
      <th>Price</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let room of rooms">
      <td>{{ room.roomNumber }}</td>
      <td>{{ getRoomTypeName(room.roomTypeId) }}</td>
      <td>{{ room.price }}</td>
      <td>
        <ng-container *ngIf="editingRoomId === room.id; else statusDisplay">
          <select [(ngModel)]="newStatus">
            <option *ngFor="let status of roomStatuses" [value]="status">{{ status }}</option>
          </select>
        </ng-container>
        <ng-template #statusDisplay>
          {{ room.roomStatus }}
        </ng-template>
      </td>
      <td>
        <ng-container *ngIf="editingRoomId === room.id; else editButton">
            <button class="save-btn" (click)="saveStatus(room)">Save</button>
            <button class="cancel-btn" (click)="cancelEdit()">Cancel</button>
        </ng-container>
        <ng-template #editButton>
            <button class="edit-btn" (click)="startEdit(room)">Edit</button>
        </ng-template>
        </td>
    </tr>
  </tbody>
</table>