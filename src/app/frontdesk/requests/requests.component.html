<div class="requests-container">
  <h3>Guest Requests & Extras</h3>

  <!-- New Request Form -->
  <form (ngSubmit)="addRequest()" class="request-form">
    <label for="type">Type:</label>
    <select [(ngModel)]="newRequest.type" name="type" required>
      <option value="meal">Meal</option>
      <option value="extra_bed">Extra Bed</option>
      <option value="cleaning">Cleaning</option>
      <option value="other">Other</option>
    </select>

    <div *ngIf="newRequest.type === 'extra_bed'" class="field-group">
      <label>Bed Size</label>
      <select [(ngModel)]="newRequest.extra_bed_size" name="extra_bed_size">
        <option value="single">Single</option>
        <option value="double">Double</option>
        <option value="queen">Queen</option>
        <option value="king">King</option>
      </select>
    </div>

    <div *ngIf="newRequest.type === 'meal'" class="field-group">
      <label>Food Options (comma-separated)</label>
      <input [(ngModel)]="newRequest.food_options" name="food_options" placeholder="e.g., Breakfast, Lunch" />
    </div>

    <div class="field-group">
      <label>Parking</label>
      <select [(ngModel)]="newRequest.parking_space" name="parking_space">
        <option value="none">None</option>
        <option value="standard">Standard</option>
        <option value="premium">Premium</option>
      </select>
    </div>

    <div class="field-group">
      <label>Quantity</label>
      <input type="number" min="1" [(ngModel)]="newRequest.quantity" name="quantity" />
    </div>

    <input [(ngModel)]="newRequest.description" name="description" placeholder="Details (optional)" />

    <button type="submit">Add Request</button>
  </form>

  <!-- Requests List -->
  <ul class="requests-list">
    <li *ngFor="let req of requests">
      <b>{{ req.type | titlecase }}</b> - {{ req.description || 'No details' }}
      <span *ngIf="req.extra_bed_size"> | Bed: {{ req.extra_bed_size }}</span>
      <span *ngIf="req.food_options"> | Food: {{ req.food_options }}</span>
      <span *ngIf="req.parking_space"> | Parking: {{ req.parking_space }}</span>
      <span *ngIf="req.quantity"> | Qty: {{ req.quantity }}</span>
      <span class="price" *ngIf="req.price !== undefined"> | Price: ${{ req.price }}</span>
      <span class="status">[{{ req.status }}]</span>
      <button *ngIf="req.status !== 'completed'" (click)="markCompleted(req.id!)">
        Mark Completed
      </button>
    </li>
  </ul>
</div>
