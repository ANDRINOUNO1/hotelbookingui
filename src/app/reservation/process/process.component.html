<div class="form-container">
  <!-- Left Image Section -->
  <div class="left-side">
    <div class="overlay"></div>
    <img src="assets/images/about-img-2.jpg" alt="Guest" />
  </div>

  <!-- Right Form Section -->
  <div class="right-side">
    <div class="form-box">
      <h2>Guest Details</h2>
      <p class="selected-room">
        Selected Room: <strong>{{ selectedRoomType?.type }}</strong>
      </p>

      <form [formGroup]="customerForm" (ngSubmit)="submitForm()">
        <div class="form-group">
          <input 
            type="text" 
            placeholder="First Name" 
            formControlName="firstName"
            [class.error]="hasError('firstName')"
            [class.valid]="isValid('firstName')"
          />
          <div class="error-message" *ngIf="hasError('firstName')">
            {{ getErrorMessage('firstName') }}
          </div>
        </div>

        <div class="form-group">
          <input 
            type="text" 
            placeholder="Last Name" 
            formControlName="lastName"
            [class.error]="hasError('lastName')"
            [class.valid]="isValid('lastName')"
          />
          <div class="error-message" *ngIf="hasError('lastName')">
            {{ getErrorMessage('lastName') }}
          </div>
        </div>

        <div class="form-group">
          <input 
            type="email" 
            placeholder="Email (Gmail only)" 
            formControlName="email"
            [class.error]="hasError('email')"
            [class.valid]="isValid('email')"
          />
          <div class="error-message" *ngIf="hasError('email')">
            {{ getErrorMessage('email') }}
          </div>
          <div class="loading-message" *ngIf="customerForm.get('email')?.pending">
            <i class="fa fa-spinner fa-spin"></i> Checking email availability...
          </div>
        </div>

                <div class="form-group">
          <input 
            type="tel" 
            placeholder="Contact Number (11 digits)" 
            formControlName="phone"
            (input)="formatPhoneNumber($event)"
            maxlength="11"
            [class.error]="hasError('phone')"
            [class.valid]="isValid('phone')"
          />
          <div class="error-message" *ngIf="hasError('phone')">
            {{ getErrorMessage('phone') }}
          </div>
        </div>

        <div class="form-group">
          <input 
            type="text" 
            placeholder="Address" 
            formControlName="address"
            [class.error]="hasError('address')"
            [class.valid]="isValid('address')"
          />
          <div class="error-message" *ngIf="hasError('address')">
            {{ getErrorMessage('address') }}
          </div>
        </div>

        <div class="form-group">
          <input 
            type="text" 
            placeholder="City" 
            formControlName="city"
            [class.error]="hasError('city')"
            [class.valid]="isValid('city')"
          />
          <div class="error-message" *ngIf="hasError('city')">
            {{ getErrorMessage('city') }}
          </div>
        </div>

        <div class="form-group">
          <input 
            type="text" 
            placeholder="Postal Code (4 digits)" 
            formControlName="postalCode"
            (input)="formatPostalCode($event)"
            maxlength="4"
            [class.error]="hasError('postalCode')"
            [class.valid]="isValid('postalCode')"
          />
          <div class="error-message" *ngIf="hasError('postalCode')">
            {{ getErrorMessage('postalCode') }}
          </div>
        </div>

        <div class="form-group">
          <textarea 
            placeholder="Special Request (Optional)" 
            formControlName="specialRequest"
          ></textarea>
        </div>

        <div class="actions">
            <button type="button" (click)="back.emit()" class="btn-secondary">Back</button>
            <button type="submit" class="btn-primary" [disabled]="!customerForm.valid">Submit Reservation</button>
        </div>

      </form>
    </div>
  </div>
</div>
